<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Boom Unit Test</title>
<link href="qunit-git.css"  type="text/css" rel="stylesheet" />
<script type="text/javascript" src="jquery-latest.js"></script>
<script type="text/javascript" src="qunit-git.js"></script>

<script type="text/javascript" src="../dev/boom.js"></script>

</head>
<body>
<h1 id="qunit-header">Boom Test</h1>
<h2 id="qunit-banner"></h2>
<div id="qunit-testrunner-toolbar"></div>
<h2 id="qunit-userAgent"></h2>
<ol id="qunit-tests"></ol>
<div id="qunit-fixture">test markup, will be hidden</div>

<script type="text/javascript">




test('add module',3,function(){

	Boom.add('mod1',function(C){
		C.mod1=true
	});

	ok(Boom.Env.mods.hasOwnProperty('mod1'),'add module success');
	
	Boom.use('mod1',function(){
		ok(true,'attache module callabck');
	});

	ok(Boom.mod1,'use module success');

});


test('use module',1,function(C){
	Boom.add('base',function(C){
		C.base=function(){
			
		}
	});
	Boom.add('extend',function(C){
		ok(typeof C.base =='function','require modlue success');
	},{requires:['base']});

	Boom.use('extend');
});




test('add file',function(){
	Boom.addFile({
		'base.js':{fullpath:'base.js',mods:['util']},
		'mA_mB_mC.js':{fullpath:'mA_mB_mC.js',requires:['base.js'],mods:['mA','mB','mC']},
		'mD.js':{fullpath:'mD.js',requires:['base.js'],mods:['mD']},
		'mE.js':{fullpath:'mE.js',requires:['base.js'],mods:['mE']},
		'needCss.js':{fullpath:'needCss.js',requires:['a.css'],mods:['needCss']},
		'a.css':{fullpath:'a.css'}
	});

	var meta=Boom.Env.meta;
	ok(meta.hasOwnProperty('base.js')&&
	meta.hasOwnProperty('mA_mB_mC.js')&&
	meta.hasOwnProperty('mD.js')&&
	meta.hasOwnProperty('needCss.js')&&
	meta.hasOwnProperty('a.css')&&
	meta.hasOwnProperty('mE.js'),'add file success');
});


asyncTest('use file',1,function(){

	Boom.use('mD.js',function(){
		start();
		ok(F_base&&F_mD,'use file success');
	});
});



asyncTest('use module by file',function(){
	Boom.use('mA',function(C){
		start();
		ok(typeof C.output == 'function'&&C.mA,'base.js loaded , mA attached');
	});	
});


asyncTest('use module that require css file',2,function(){
	/*
	Boom.use('needCss',function(){
		start();
		ok(jQuery('body').css('backgroundColor')=='red','css is loaded');
		ok(true,'needCss module used');
	});*/

	Boom.use('a.css','needCss.js');
	start();
})


asyncTest('load muti file',2,function(){
	var FILE_1,FILE_2;
	stop();
	Boom.load('f1.js','f2.js');
});


</script>
</body>
</html>